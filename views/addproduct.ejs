<%- include('partials/header'); %>

<section class="homebg">

    
    

    <div class="modal fade bd-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <form action="" id="add_product_form" method="post">
                <h2>Add New Product</h2>
                <div class="mb-3">
                    <label for="name" class="form-lable">Name</label>
                    <input type="text" class="form-control" name="name" id="name" required>
                    <div class="name error text-danger"></div>
                </div>
                <div class="mb-3">
                    <label for="price" class="form-lable">Price</label>
                    <input type="text" class="form-control" name="price" id="price" required>
                    <div class="name error text-danger"></div>
                </div>
                <div class="mb-3">
                    <label for="dec" class="form-lable">Description</label>
                    <input type="text" class="form-control" name="dec" id="dec" required>
                    <div class="name error text-danger"></div>
                </div>
                <div class="mb-3">
                    <label for="img" class="form-lable">Image URL</label>
                    <input type="text" class="form-control" name="img" id="img" required>
                    <div class="name error text-danger"></div>
                </div>
                <div class="mb-3">
                    <button type="submit" class="btn btn-primary">Add</button>
                </div>
            </form>
        </div>
      </div>
    </div>
   


</section>

<script>
    const form = document.getElementById("add_product_form");

    form.addEventListener("submit", async(e)=>{
        e.preventDefault();

        let name = document.getElementById("name").value;
        let price = document.getElementById("price").value;
        let description = document.getElementById("dec").value;
        let image = document.getElementById("img").value;
       
        try{
            let res = await fetch("/product",{
                method:"POST",
                headers:{"Content-Type":"application/json"},
                body: JSON.stringify({
                    name,
                    price,
                    description,
                    image
                })

            })
            if(res.status == 201){
                alert("Product Added successfully");
                form.reset();
            }

        }catch(err){
            console.log(err)
            alert("something went worng");
        }
    })
</script>

<%- include('partials/footer'); %>